pipeline{
 agent any
 tools {
   maven 'Maven 3.3.9'
   jdk 'jdk8'
 }
 stages {
   stage('build'){
      steps{
	     sh 'mvn -B -DskipTests clean package'
      }
   }	
   stage('Checkstyle'){
      agent { label "worker-tester" }
      steps{
	sh 'mvn checkstyle:checkstyle'
      }
   }
   stage('Test'){
      agent { label "worker-builder" }
      steps{
        sh 'mvn test'
      }
   }
   
 }
}
